name: "ESX Legacy Full Build by Dre"
version: "1.0.0"
author: "Dre"

tasks:
  # ---------------------------------------------
  # ESX LEGACY (LATEST VERSION)
  # ---------------------------------------------
  - action: download_github
    src: https://github.com/esx-framework/esx-legacy
    ref: main
    dest: resources/[esx]/es_extended

  - action: download_github
    src: https://github.com/esx-framework/esx_addonaccount
    ref: main
    dest: resources/[esx]/esx_addonaccount

  - action: download_github
    src: https://github.com/esx-framework/esx_addoninventory
    ref: main
    dest: resources/[esx]/esx_addoninventory

  - action: download_github
    src: https://github.com/esx-framework/esx_datastore
    ref: main
    dest: resources/[esx]/esx_datastore

  - action: download_github
    src: https://github.com/esx-framework/esx_society
    ref: main
    dest: resources/[esx]/esx_society

  # ---------------------------------------------
  # ESX JOBS PACK
  # ---------------------------------------------
  - action: download_github
    src: https://github.com/esx-framework/esx_policejob
    ref: main
    dest: resources/[esx_jobs]/esx_policejob

  - action: download_github
    src: https://github.com/esx-framework/esx_ambulancejob
    ref: main
    dest: resources/[esx_jobs]/esx_ambulancejob

  - action: download_github
    src: https://github.com/esx-framework/esx_mechanicjob
    ref: main
    dest: resources/[esx_jobs]/esx_mechanicjob

  - action: download_github
    src: https://github.com/esx-framework/esx_realestateagentjob
    ref: main
    dest: resources/[esx_jobs]/esx_realestateagentjob

  - action: download_github
    src: https://github.com/esx-framework/esx_taxijob
    ref: main
    dest: resources/[esx_jobs]/esx_taxijob

  - action: download_github
    src: https://github.com/esx-framework/esx_vehicleshop
    ref: main
    dest: resources/[esx_jobs]/esx_vehicleshop

  # ---------------------------------------------
  # OX FRAMEWORK RESOURCES
  # ---------------------------------------------
  - action: download_github
    src: https://github.com/overextended/ox_lib
    ref: main
    dest: resources/[ox]/ox_lib

  - action: download_github
    src: https://github.com/overextended/ox_inventory
    ref: main
    dest: resources/[ox]/ox_inventory

  - action: download_github
    src: https://github.com/overextended/ox_target
    ref: main
    dest: resources/[ox]/ox_target

  - action: download_github
    src: https://github.com/overextended/oxmysql
    ref: main
    dest: resources/[database]/oxmysql

  # ---------------------------------------------
  # WORLD SETTINGS
  # ---------------------------------------------
  - action: write_file
    path: resources/[custom]/world/client.lua
    data: |
      -- Restore Wanted Level
      CreateThread(function()
          while true do
              Wait(0)
              SetMaxWantedLevel(5)
              local lvl = GetPlayerWantedLevel(PlayerId())
              SetPlayerWantedLevel(PlayerId(), lvl, false)
              SetPlayerWantedLevelNow(PlayerId(), false)
          end
      end)

      -- Enable Dispatch Services
      CreateThread(function()
          for i = 1, 15 do
              EnableDispatchService(i, true)
          end
      end)

      -- Restore Story Mode Ped & Traffic Density
      CreateThread(function()
          while true do
              Wait(0)
              SetPedDensityMultiplierThisFrame(1.0)
              SetScenarioPedDensityMultiplierThisFrame(1.0, 1.0)
              SetVehicleDensityMultiplierThisFrame(1.0)
              SetRandomVehicleDensityMultiplierThisFrame(1.0)
              SetParkedVehicleDensityMultiplierThisFrame(1.0)
          end
      end)

  # ---------------------------------------------
  # SERVER.CFG
  # ---------------------------------------------
  - action: write_file
    path: server.cfg
    data: |
      #########################################
      # ESX Legacy Full Build by Dre
      #########################################

